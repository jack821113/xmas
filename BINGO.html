<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–èª• Bingo æŠ½è™Ÿæ©Ÿ</title>
    <style>
        /* é é¢èƒŒæ™¯æ¨£å¼ - æ·±æ£®æ—ç¶ è‰² */
        body {
            font-family: "Microsoft JhengHei UI", "Microsoft JhengHei", "PingFang TC", "Helvetica Neue", Arial, sans-serif; 
            color: #fdf9e9; /* ä¸»æ–‡å­—é¡è‰²ç‚ºç±³ç™½è‰² */
            padding: 0;
            margin: 0;
            
            background-color: #1b5e20; /* æ·±æ£®æ—ç¶ è‰² (Deep Forest Green) */
            background-image: 
                repeating-linear-gradient(-45deg, 
                    rgba(0,0,0,.1) 0px, 
                    rgba(0,0,0,.1) 1px, 
                    transparent 1px, 
                    transparent 20px); 
            background-size: 20px 20px; 
            background-attachment: fixed;
        }

        .main-wrapper {
            max-width: 950px; 
            margin: 30px auto; 
            display: flex;
            gap: 20px; 
            padding: 15px;
            position: relative;
            z-index: 10;
        }

        /* åœ–ç‰‡å®¹å™¨æ¨£å¼ */
        #logo-container {
            text-align: center;
            margin-bottom: 10px;
        }

        #logo {
            max-width: 100%;
            height: auto;
            max-height: 150px; 
            display: block;
            margin: 0 auto;
        }

        /* é¢æ¿åŸºåº•æ¨£å¼ - æ·±é…’ç´…è‰² */
        .left-panel, .right-panel {
            flex: 1; 
            background: #8b0000; /* æ·±é…’ç´…è‰²/æ·±å‹ƒè‰®ç¬¬ç´… (Dark Red) */
            color: #fdf9e9; /* é¢æ¿æ–‡å­—é¡è‰²ç‚ºç±³ç™½è‰² */
            border-radius: 15px; 
            padding: 30px; 
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 4px solid #f1c40f; /* é‡‘è‰²é‚Šæ¡† */
        }

        .left-panel {
            text-align: center;
        }

        /* h1 æ¨™é¡Œæ¨£å¼ */
        h1 {
            color: #fdf9e9; /* ç±³ç™½è‰² */
            font-size: 2.2em; 
            margin: 10px 0 20px 0; 
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); 
            border: none; 
            display: block; 
        }
        
        /* äºŒç´šæ¨™é¡Œ (å·²æŠ½å‡ºè™Ÿç¢¼) é¡è‰² */
        .right-panel h2 {
            color: #f1c40f; /* é‡‘è‰² */
            font-size: 2em;
            margin-top: 0;
        }

        /* æŠ½è™Ÿå€ (æœ€æ–°è™Ÿç¢¼é¡¯ç¤ºå€å¡Š) */
        #current-call {
            background-color: #f39c12; /* è–èª•é‡‘è‰²/æ©˜è‰² */
            color: white;
            padding: 20px; 
            border-radius: 8px;
            margin-bottom: 25px;
            font-size: 1.2em;
            border: 3px solid #e67e22; 
            font-weight: bold; 
        }

        #latest-number {
            /* è™Ÿç¢¼çƒæ¨£å¼ - æ”¾å¤§ */
            font-size: 5em; 
            font-weight: 900; 
            display: block;
            margin-top: 10px;
            
            width: 120px; 
            height: 120px; 
            line-height: 120px; 
            border-radius: 50%;
            
            background-color: #ecf0f1; 
            color: #333; 
            border: 4px solid #7f8c8d; 

            margin: 10px auto; 
            transform: scale(1);
            transition: none; 
            text-shadow: none; 
        }

        /* è™Ÿç¢¼çƒé¡è‰²å®šç¾© */
        .ball-b { background-color: #3498db !important; color: white !important; border-color: #2980b9 !important; } 
        .ball-i { background-color: #e74c3c !important; color: white !important; border-color: #c0392b !important; } 
        .ball-n { background-color: #f1c40f !important; color: #2c3e50 !important; border-color: #f39c12 !important; } 
        .ball-g { background-color: #2ecc71 !important; color: white !important; border-color: #27ae60 !important; } 
        .ball-o { background-color: #9b59b6 !important; color: white !important; border-color: #8e44ad !important; } 


        /* === æ»¾çƒå‹•ç•«å®šç¾© === */
        @keyframes rolling-bounce {
            0% { transform: translateX(-200px) rotate(-180deg) scale(0.5); opacity: 0; }
            80% { transform: translateX(0px) rotate(720deg) scale(1.1); opacity: 1; }
            90% { transform: translateX(-5px) scale(1.05); } 
            100% { transform: translateX(0px) rotate(720deg) scale(1); opacity: 1; }
        }

        .rotating {
            animation: rolling-bounce 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; 
        }
        /* ======================== */


        /* æŒ‰éˆ• - è–èª•ç¶ è‰²ï¼Œé‡‘è‰²é™°å½± */
        button {
            background-color: #27ae60; /* è–èª•ç¶ è‰² */
            color: white;
            padding: 15px 30px; 
            font-size: 1.1em; 
            border-radius: 40px; 
            box-shadow: 0 5px #f1c40f; /* é‡‘è‰²é™°å½± */
            margin-bottom: 20px;
            font-weight: bold;
            cursor: pointer; 
            transition: all 0.2s;
        }

        button:hover {
            background-color: #2ecc71; 
            transform: scale(1.03); 
        }
        
        button:active {
            transform: translateY(3px);
            box-shadow: 0 1px #f1c40f;
        }

        /* å·²æŠ½å‡ºè™Ÿç¢¼æ¸…å–®ä¸­çš„è™Ÿç¢¼çƒæ¨£å¼ */
        .number-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px; 
            padding: 8px;
            max-height: 60vh; 
            overflow-y: auto;
            border: 2px dashed #f1c40f; /* é‡‘è‰²è™›ç·šé‚Šæ¡† */
            border-radius: 10px;
            justify-content: flex-start; 
        }
        
        /* æ¸…å–®ä¸­çš„åœ“å½¢è™Ÿç¢¼æ¨£å¼ */
        .number-item {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px; 
            height: 40px;
            border-radius: 50%; 
            font-weight: 900; 
            font-size: 1em; 
        }
        
        /* ç‰¹æ®Šæ¨£å¼ï¼šæœ€æ–°æŠ½å‡ºè™Ÿç¢¼ */
        .latest-list-item {
             transform: scale(1.1); 
             animation: flash 0.5s ease-out 3; 
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    
    <div class="main-wrapper">
        
        <div class="left-panel">
            <div id="logo-container">
                <img id="logo" 
                     src="https://ppt.cc/fkKMYx@.png" 
                     alt="æ´»å‹• Logo - Christmas Party">
            </div>

            <h1>è–èª• Bingo æŠ½è™Ÿæ©Ÿ</h1>
            
            <button id="call-button">ğŸ”” æŠ½å–ä¸‹ä¸€å€‹è™Ÿç¢¼</button>
            
            <div id="current-call">
                **æœ€æ–°çš„è™Ÿç¢¼**
                <span id="latest-number">---</span>
            </div>
        </div>

        <div class="right-panel" id="called-numbers-display">
            <h2>å·²æŠ½å‡ºè™Ÿç¢¼ (ä¾æŠ½å‡ºé †åº)</h2>
            <div id="number-list-container" class="number-list">
                <p style="text-align: center; width: 100%; color:#fdf9e9;">å°šæœªæŠ½å‡ºä»»ä½•è™Ÿç¢¼ã€‚</p>
            </div>
        </div>
        
    </div>

    <audio id="draw-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-fast-bubble-pop-1120.mp3" type="audio/mp3">
    </audio>

    <audio id="call-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-complete-2055.mp3" type="audio/mp3">
    </audio>

    <script>
        // JS é‚è¼¯å€
        const allNumbers = Array.from({ length: 75 }, (_, i) => i + 1); 
        let availableNumbers = [...allNumbers];
        let calledNumbers = []; 
        let latestCalled = null;

        const latestNumberDisplay = document.getElementById('latest-number');
        const callButton = document.getElementById('call-button');
        const numberListContainer = document.getElementById('number-list-container'); 

        // === éŸ³é »å…ƒç´  ===
        const drawSound = document.getElementById('draw-sound');
        const callSound = document.getElementById('call-sound');

        drawSound.volume = 0.5;
        callSound.volume = 0.7;
        
        function initAudio() {
            const attemptPlay = (audio) => {
                audio.muted = true; 
                audio.play().then(() => {
                    audio.pause();
                    audio.muted = false; 
                    audio.currentTime = 0;
                }).catch(error => {
                    console.log('éŸ³é »åˆå§‹åŒ–å¤±æ•—ï¼Œå¯èƒ½éœ€è¦ç”¨æˆ¶äº’å‹•:', error);
                });
            };

            attemptPlay(drawSound);
            attemptPlay(callSound);
        }

        function getBallClass(num) {
            if (num >= 1 && num <= 15) return 'ball-b'; 
            if (num >= 16 && num <= 30) return 'ball-i'; 
            if (num >= 31 && num <= 45) return 'ball-n'; 
            if (num >= 46 && num <= 60) return 'ball-g'; 
            if (num >= 61 && num <= 75) return 'ball-o'; 
            return '';
        }
        
        function drawCalledNumbersList() {
            numberListContainer.innerHTML = '';
            
            if (calledNumbers.length === 0) {
                 numberListContainer.innerHTML = '<p style="text-align: center; width: 100%; color:#fdf9e9;">å°šæœªæŠ½å‡ºä»»ä½•è™Ÿç¢¼ã€‚</p>';
                 return;
            }

            document.querySelectorAll('.latest-list-item').forEach(el => {
                el.classList.remove('latest-list-item');
                el.style.animation = '';
            });

            calledNumbers.forEach(num => {
                const itemSpan = document.createElement('span');
                itemSpan.className = `number-item ${getBallClass(num)}`; 
                itemSpan.textContent = num; 
                
                if (num === latestCalled) {
                    itemSpan.classList.add('latest-list-item');
                }
                
                numberListContainer.appendChild(itemSpan);
            });
            
            if (latestCalled) {
                const latestItem = numberListContainer.querySelector('.latest-list-item');
                if (latestItem) {
                    setTimeout(() => {
                        latestItem.scrollIntoView({ behavior: 'smooth', block: 'end' });
                    }, 50); 
                }
            }
        }

        function callNextNumber() {
            if (availableNumbers.length === 0) {
                latestNumberDisplay.textContent = 'çµæŸ';
                latestNumberDisplay.className = '';
                callButton.disabled = true;
                return;
            }

            callButton.disabled = true;
            latestNumberDisplay.textContent = '...'; 
            latestNumberDisplay.className = ''; 

            drawSound.currentTime = 0;
            drawSound.play().catch(error => {
                console.error("ç„¡æ³•æ’­æ”¾æŠ½å–éŸ³æ•ˆ:", error);
            });

            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const newNumber = availableNumbers.splice(randomIndex, 1)[0];

            calledNumbers.push(newNumber); 
            latestCalled = newNumber;
            const ballClass = getBallClass(newNumber);

            setTimeout(() => {
                latestNumberDisplay.classList.add(ballClass); 
                latestNumberDisplay.textContent = newNumber; 
                latestNumberDisplay.classList.add('rotating'); 
                
                callSound.currentTime = 0;
                callSound.play().catch(error => {
                    console.error("ç„¡æ³•æ’­æ”¾å ±è™ŸéŸ³æ•ˆ:", error);
                });

            }, 500); 

            setTimeout(() => {
                latestNumberDisplay.classList.remove('rotating'); 
                callButton.disabled = false; 
                
                drawCalledNumbersList();
            }, 2000); 
        }

        function initBingoMachine() {
            initAudio(); 
            drawCalledNumbersList(); 
            callButton.addEventListener('click', callNextNumber); 
        }

        initBingoMachine();
    </script>
</body>
</html>